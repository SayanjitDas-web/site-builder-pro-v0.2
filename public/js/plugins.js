const PRESET_PLUGINS = [
    { id: 'smart-form', name: 'Smart Form', description: 'Drag-and-drop form builder.', icon: 'fa-envelope', color: 'text-blue-600', code: `builderAPI.registerComponent('smart-form',{icon:'fa-envelope text-blue-600 bg-blue-100',label:'Smart Form',tagName:'form',canDrop:true,defaultStyles:{padding:'20px',backgroundColor:'#fff',borderWidth:'1px',borderStyle:'solid',borderColor:'#e5e7eb',borderRadius:'8px',display:'flex',flexDirection:'column',gap:'10px',minHeight:'100px'}});builderAPI.registerProperty({label:'Action URL',type:'text',key:'action',targetType:'smart-form',onChange:(e,v)=>e.action=v});builderAPI.registerProperty({label:'Method',type:'select',key:'method',targetType:'smart-form',options:['GET','POST'],onChange:(e,v)=>e.method=v});function createField(l,t,p){const id=Math.random().toString(36).substr(2,9);return[{id:'lbl_'+id,type:'paragraph',tagName:'label',content:l,children:[],styles:{fontSize:'14px',fontWeight:'600',marginBottom:'4px',display:'block'}},{id:'inp_'+id,type:'input',tagName:t==='textarea'?'textarea':'input',content:'',children:[],placeholder:p,styles:{width:'100%',padding:'8px',borderWidth:'1px',borderRadius:'4px',minHeight:t==='textarea'?'80px':'auto'}}]};builderAPI.registerProperty({type:'button',text:'Add Text Field',targetType:'smart-form',onClick:(e)=>e.children.push(...createField('Name','text','John Doe'))});builderAPI.registerProperty({type:'button',text:'Add Email Field',targetType:'smart-form',onClick:(e)=>e.children.push(...createField('Email','email','user@example.com'))});builderAPI.registerProperty({type:'button',text:'Add Text Area',targetType:'smart-form',onClick:(e)=>e.children.push(...createField('Message','textarea','Type here...'))});builderAPI.registerProperty({type:'button',text:'Add Submit Btn',targetType:'smart-form',onClick:(e)=>e.children.push({id:'b_'+Math.random().toString(36).substr(2,9),type:'button',tagName:'button',content:'Submit',children:[],styles:{padding:'10px',backgroundColor:'#4f46e5',color:'#fff',borderRadius:'4px',width:'100%',cursor:'pointer'}})});` },
    { id: 'gemini-ai', name: 'Gemini AI', description: 'Generate layouts with AI.', icon: 'fa-wand-magic-sparkles', color: 'text-purple-600', code: `builderAPI.registerComponent('ai-gen',{icon:'fa-wand-magic-sparkles text-purple-600 bg-purple-100',label:'AI Gen',tagName:'div',defaultContent:'AI Box',defaultStyles:{padding:'20px',borderStyle:'dashed',borderColor:'#d946ef',borderWidth:'2px',backgroundColor:'#fdf4ff',display:'flex',justifyContent:'center'}});builderAPI.registerProperty({label:'API Key',type:'text',key:'ak',targetType:'ai-gen',onChange:(e,v)=>e.ak=v});builderAPI.registerProperty({label:'Prompt',type:'text',key:'pr',targetType:'ai-gen',onChange:(e,v)=>e.pr=v});function sanitize(n){if(!n)return null;n.id='ai_'+Math.random().toString(36).substr(2,9);if(!n.styles)n.styles={};const map={'div':'card','h1':'header','h2':'header','p':'paragraph','button':'button','img':'image','input':'input'};if(map[n.type])n.type=map[n.type];if(n.children)n.children=n.children.map(sanitize).filter(x=>x);else n.children=[];return n}builderAPI.registerProperty({type:'button',text:'Generate',targetType:'ai-gen',onClick:async(e)=>{if(!e.ak||!e.pr)return alert('Missing Key/Prompt');const btn=document.activeElement;btn.innerText='Generating...';try{const res=await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key='+e.ak,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({contents:[{parts:[{text:'Return JSON only. Layout generator. Types: card,header,paragraph,button,image. CSS camelCase in styles. Prompt: '+e.pr}]}]})});const d=await res.json();let t=d.candidates[0].content.parts[0].text.replace(/\\\`\\\`\\\`json/g,'').replace(/\\\`\\\`\\\`/g,'').trim();const n=JSON.parse(t);e.children.push(sanitize(n));e.styles.borderStyle='none';e.styles.backgroundColor='transparent';e.content='';builderAPI.refreshCanvas();}catch(z){alert(z.message)}finally{btn.innerText='Generate';}}});` },
    { id: 'anim', name: 'Animations', description: 'Fade, Slide, Zoom.', icon: 'fa-film', color: 'text-orange-500', code: `builderAPI.addGlobalStyle('@keyframes fi{from{opacity:0}to{opacity:1}}@keyframes su{from{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes zi{from{transform:scale(0.9);opacity:0}to{transform:scale(1);opacity:1}}@keyframes bo{0%,20%,50%,80%,100%{transform:translateY(0)}40%{transform:translateY(-20px)}60%{transform:translateY(-10px)}}');builderAPI.registerProperty({label:'Anim',type:'select',key:'animationName',options:['none','fi','su','zi','bo'],onChange:(e,v)=>{e.styles.animationName=v==='none'?'':v;if(v!=='none'){e.styles.animationDuration='1s';e.styles.animationFillMode='both'}}});builderAPI.registerProperty({label:'Duration',type:'text',key:'animationDuration',placeholder:'1s',onChange:(e,v)=>e.styles.animationDuration=v});` },
    { id: 'nav-bar', name: 'Responsive Navbar', description: 'Auto-collapsing mobile menu.', icon: 'fa-compass', color: 'text-indigo-500', code: `builderAPI.addGlobalStyle('.navbar-root{display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center}.nav-menu{display:flex;gap:20px}.nav-toggle{display:none;background:none;border:none;font-size:24px;cursor:pointer}@media(max-width:768px){.nav-menu{display:none;width:100%;flex-direction:column;gap:10px;padding-top:10px}.nav-menu.open{display:flex}.nav-toggle{display:block}}');builderAPI.registerComponent('navbar',{icon:'fa-compass text-indigo-500 bg-indigo-100',label:'Navbar',tagName:'nav',canDrop:true,defaultStyles:{padding:'15px',backgroundColor:'#fff',boxShadow:'0 2px 5px rgba(0,0,0,0.1)',width:'100%',position:'relative',className:'navbar-root'}});builderAPI.registerProperty({type:'button',text:'Generate Navbar',targetType:'navbar',onClick:(e)=>{e.children=[{id:'b_'+Math.random().toString(36).substr(2,9),type:'header',tagName:'h3',content:'My Brand',styles:{fontSize:'20px',fontWeight:'bold',margin:'0'}},{id:'t_'+Math.random().toString(36).substr(2,9),type:'header',tagName:'button',content:'â‰¡',styles:{className:'nav-toggle'}},{id:'m_'+Math.random().toString(36).substr(2,9),type:'card',tagName:'div',children:[{id:'l1',type:'link',tagName:'a',content:'Home',href:'#',styles:{textDecoration:'none',color:'#333',padding:'5px'}},{id:'l2',type:'link',tagName:'a',content:'About',href:'#',styles:{textDecoration:'none',color:'#333',padding:'5px'}}],styles:{className:'nav-menu'}}];builderAPI.refreshCanvas();}});builderAPI.registerProperty({type:'button',text:'Add Link',targetType:'navbar',onClick:(e)=>{const children = JSON.parse(JSON.stringify(e.children)); const m=children.find(c=>c.styles.className&&c.styles.className.includes('nav-menu'));if(m){m.children.push({id:'l_'+Math.random().toString(36).substr(2,9),type:'link',tagName:'a',content:'Link',href:'#',styles:{textDecoration:'none',color:'#333',padding:'5px'}});e.children=children;}else{alert('Generate structure first');}}});builderAPI.registerProperty({type:'button',text:'Toggle Mobile Menu',targetType:'navbar',onClick:(e)=>{const children = JSON.parse(JSON.stringify(e.children)); const m=children.find(c=>c.styles.className&&c.styles.className.includes('nav-menu'));if(m){if(m.styles.className.includes('open'))m.styles.className=m.styles.className.replace('open','').trim();else m.styles.className+=' open';e.children=children;}}});` },
    { id: 'card-layouts', name: 'Card Layouts', description: 'Pre-styled cards (Profile, Product, News) with one click.', icon: 'fa-id-card', color: 'text-pink-600', code: `builderAPI.registerComponent('card-preset', { icon: 'fa-id-card text-pink-600 bg-pink-100', label: 'Card Preset', tagName: 'div', canDrop: true, defaultStyles: { padding: '0px', backgroundColor: '#fff', borderRadius: '12px', boxShadow: '0 4px 6px -1px rgba(0,0,0,0.1)', overflow: 'hidden', border: '1px solid #e5e7eb', display: 'flex', flexDirection: 'column', width: '100%', maxWidth: '320px', margin: '10px' }, defaultContent: '<div style="padding:20px; text-align:center; color:#888;">Select & Choose Layout</div>' }); builderAPI.registerProperty({ type: 'button', text: 'Load Profile Layout', targetType: 'card-preset', onClick: (el) => { el.content = ''; el.children = [ { id: 'img_'+Math.random().toString(36).substr(2,9), type: 'image', tagName: 'img', src: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=400', styles: { width: '100%', height: '160px', objectFit: 'cover' } }, { id: 'body_'+Math.random().toString(36).substr(2,9), type: 'card', tagName: 'div', children: [ { id: 't1', type: 'header', tagName: 'h3', content: 'Jane Doe', styles: { fontSize: '20px', fontWeight: 'bold', margin: '0' } }, { id: 't2', type: 'paragraph', tagName: 'p', content: 'Senior Developer', styles: { color: '#6b7280', fontSize: '14px', margin: '5px 0 15px 0' } }, { id: 'btn', type: 'button', tagName: 'button', content: 'Contact', styles: { width: '100%', padding: '8px', backgroundColor: '#3b82f6', color: 'white', borderRadius: '6px' } } ], styles: { padding: '20px', display: 'flex', flexDirection: 'column', alignItems: 'center' } } ]; builderAPI.refreshCanvas(); } }); builderAPI.registerProperty({ type: 'button', text: 'Load Product Layout', targetType: 'card-preset', onClick: (el) => { el.content = ''; el.children = [ { id: 'img_'+Math.random().toString(36).substr(2,9), type: 'image', tagName: 'img', src: 'https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=400', styles: { width: '100%', height: '200px', objectFit: 'cover' } }, { id: 'body_'+Math.random().toString(36).substr(2,9), type: 'card', tagName: 'div', children: [ { id: 't1', type: 'header', tagName: 'h3', content: 'Urban Sneakers', styles: { fontSize: '18px', fontWeight: 'bold' } }, { id: 'p1', type: 'header', tagName: 'div', content: '$99.00', styles: { fontSize: '20px', fontWeight: 'bold', color: '#10b981', margin: '5px 0' } }, { id: 'btn', type: 'button', tagName: 'button', content: 'Add to Cart', styles: { width: '100%', padding: '10px', backgroundColor: '#1f2937', color: 'white', borderRadius: '6px' } } ], styles: { padding: '20px', display: 'flex', flexDirection: 'column', gap: '5px' } } ]; builderAPI.refreshCanvas(); } });` }
];
